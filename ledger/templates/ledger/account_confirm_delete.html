{% extends 'greensite/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
<div class="row" xmlns="http://www.w3.org/1999/html">
    <div class="col-12">
        <div class="card">
            <div class="card-body">

                <h4 class="card-title">Object deletion</h4>
                <p class="card-title-desc">Deletion of any object is possible only in case if there is no related objects.</p>

                <form method="post">{% csrf_token %}
                    {% if related %}
                    <p class="text-danger">Object deletion is impossible, the following related objects are found:</p>
                    <ul>
                        {% for rel_class, rel_list in related.items %}
                        <li>{{ rel_class }}</li>
                            <ul>
                                {% for rel_obj in rel_list|slice:":10" %}
                                <li>{{ rel_obj }}</li>
                                {% endfor %}
                                {% if rel_list|length > 10 %}
                                <li>{{ rel_list|length|add:"-10" }} item(s) more</li>
                                {% endif %}
                            </ul>
                        {% endfor %}
                    </ul>
                    <div class="row mb-4">
                        <div class="col ms-auto">
                            <div class="d-flex flex-reverse flex-wrap gap-2">
                                <a role="button" class="btn btn-info w-lg waves-effect" href="{% url 'ledger:accounts' %}">
                                    OK
                                </a>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <p>There is no related objects, you can proceed with the deletion.</p>
                    <div class="row mb-4">
                        <div class="col ms-auto">
                            <div class="d-flex flex-reverse flex-wrap gap-2">
                                <button type="submit" class="btn btn-danger waves-effect waves-light me-1">
                                    Confirm Delete
                                </button>
                                <a role="button" class="btn btn-info w-lg waves-effect" href="{% url 'ledger:accounts' %}">
                                    Cancel
                                </a>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </form>
            </div>
        </div>  <!-- end card -->
    </div>   <!-- end column -->
</div>
{% endblock %}